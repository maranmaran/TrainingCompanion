
<mat-sidenav-container class="sidenav-container" [hasBackdrop]="false">

    <mat-sidenav class="sidenav" [autoFocus]="false" [mode]="'side'" [position]="'end'">
        <div fxLayout="column">
            <button *ngIf="dashboardEditMode" mat-stroked-button class="m-3" (click)="toggleSidenav()" (click)="onSaveDashboard()">Save customization</button>
            <p class="p-3">List of components:</p>
            <div
              class="p-3"
              cdkDropList
              #componentsList="cdkDropList"
              [cdkDropListConnectedTo]="[trackOne, trackTwo, componentsList]"
              [cdkDropListData]="mainDashboardComponents"
              (cdkDropListDropped)="drop($event)"
              (cdkDragStarted)="dragStart($event)"
              (cdkDragEntered)="dragEnter($event)"
              (cdkDragEnded)="dragEnd($event)">
                <div
                  *ngFor="let component of mainDashboardComponents"
                  cdkDrag
                  (cdkDragEntered)="dragEnter($event)"
                  (cdkDragEnded)="dragEnd($event)">
                    {{component.code}}
                </div>
            </div>
        </div>
    </mat-sidenav>

    <mat-sidenav-content>

        <div class="dashboard-actions mb-3" fxLayout="row" fxLayoutAlign="space-between">
            <button mat-stroked-button class="m-3" (click)="activateNotif()">Send test notification</button>
            <button *ngIf="!dashboardEditMode" mat-stroked-button class="m-3" (click)="toggleSidenav()">Customize dashboard</button>
        </div>

        <div class="board h-100" fxLayout="row wrap">
            <!-- <ng-container *ngFor="let track of tracks; let i = index"> -->

            <!--TRACK ONE-->
            <div
              id="track1"
              cdkDropList
              #trackOne="cdkDropList"
              [cdkDropListConnectedTo]="[trackTwo, componentsList]"
              [cdkDropListData]="tracks[0]?.items"
              (cdkDropListDropped)="drop($event, 0)"
              fxFlex="1 1 50%"
              class="h-100">
                <ng-template *ngFor="let item of tracks[0]?.items" appDashboardOutlet [item]="item"></ng-template>
            </div>

            <!--TRACK TWO-->
            <div
              id="track2"
              cdkDropList
              #trackTwo="cdkDropList"
              [cdkDropListConnectedTo]="[trackOne, componentsList]"
              [cdkDropListData]="tracks[1]?.items"
              (cdkDropListDropped)="drop($event, 1)"
              fxFlex="1 1 50%"
              class="h-100">
              <ng-template *ngFor="let item of tracks[1]?.items" appDashboardOutlet [item]="item"></ng-template>
          </div>
            <!-- </ng-container> -->
        </div>


    </mat-sidenav-content>

  </mat-sidenav-container>
