<span id="set-create-edit">

  <div fxLayout="row" fxLayoutAlign="space-between">
    <h2> {{data.title}} </h2>
    <button mat-icon-button color="accent" (click)="addGroup()">
      <i class="fas fa-plus"></i>
    </button>
  </div>

  <mat-divider class="dialog-form-divider"></mat-divider>

  <div mat-dialog-content *ngIf="setFormGroups.length > 0 && exerciseType && settings">
    <div class="form" fxLayout="column">
      <form *ngFor="let set of setFormGroups; let i = index" [formGroup]="set">
        <div id="control-row" fxLayout="row" fxLayoutGap="10px">

          <label id="set-number">{{i + 1}}.</label>

          <ng-container *ngIf="exerciseType.requiresBodyweight">
            <mat-form-field>
              <input matInput type="number" formControlName="weight" placeholder="Bodyweight">
            </mat-form-field>
          </ng-container>

          <ng-container *ngIf="exerciseType.requiresWeight">
            <mat-form-field>
              <input matInput type="number" formControlName="weight" placeholder="Weight">
            </mat-form-field>
          </ng-container>

          <ng-container *ngIf="exerciseType.requiresReps">
            <mat-form-field>
              <input matInput type="number" formControlName="reps" placeholder="Reps">
            </mat-form-field>
          </ng-container>

          <ng-container *ngIf="exerciseType.requiresTime">
            <mat-form-field>
              <input matInput type="number" formControlName="time" placeholder="Time">
            </mat-form-field>
          </ng-container>

          <ng-container *ngIf="settings.useRpeSystem">
            <mat-form-field *ngIf="settings.rpeSystem == 'Rpe'; else rir">
              <mat-label>RPE</mat-label>
              <mat-select formControlName="rpe" >
                <mat-option value="5">5</mat-option>
                <mat-option value="5.5">5.5</mat-option>
                <mat-option value="6">6</mat-option>
                <mat-option value="6.5">6.5</mat-option>
                <mat-option value="7">7</mat-option>
                <mat-option value="7.5">7.5</mat-option>
                <mat-option value="8">8</mat-option>
                <mat-option value="8.5">8.5</mat-option>
                <mat-option value="9">9</mat-option>
                <mat-option value="9.5">9.5</mat-option>
                <mat-option value="10">10</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-divider [vertical]="true"></mat-divider>
          </ng-container>

          <ng-template #rir>
            <mat-form-field>
              <mat-label>RIR</mat-label>
              <mat-select formControlName="rir">
                <mat-option value="0">0</mat-option>
                <mat-option value="0.5">0.5</mat-option>
                <mat-option value="1">1</mat-option>
                <mat-option value="1.5">1.5</mat-option>
                <mat-option value="2">2</mat-option>
                <mat-option value="2.5">2.5</mat-option>
                <mat-option value="3">3</mat-option>
                <mat-option value="3.5">3.5</mat-option>
                <mat-option value="4">4</mat-option>
                <mat-option value="4.5">4.5</mat-option>
                <mat-option value="5">5</mat-option>
              </mat-select>
            </mat-form-field>
            <mat-divider [vertical]="true"></mat-divider>
          </ng-template>

          <div id="set-actions" fxFlexLayout="column">
            <button id="delete-set-{{i}}" mat-icon-button matTooltip="Remove set" [matTooltipPosition]="'right'" color="accent" (click)="removeGroup(i)">
              <i class="fas fa-trash"></i>
            </button>

            <button id="copy-down-{{i}}" mat-icon-button color="accent" matTooltip="Copy down" [matTooltipPosition]="'right'" (click)="copyDown(i)">
              <i class="fas fa-chevron-down"></i>
            </button>
          </div>

        </div>
      </form>
    </div>
  </div>


  <div class="mt-2 dialog-form-actions" fxLayout="row" fxLayoutAlign="space-between">
    <button mat-button (click)="onClose()">Close</button>
    <button mat-stroked-button color="accent" (click)="onSubmit()"
      [disabled]="!isFormValid">{{ data.action == 'Create' ? 'Add' : 'Save' }}</button>
  </div>

</span>
