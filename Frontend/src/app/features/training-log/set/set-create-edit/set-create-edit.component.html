<span id="set-create-edit">

    <div fxLayout="row" fxLayoutAlign="space-between">
        <h2> {{data.title}} </h2>
        <button mat-icon-button color="accent" (click)="addControl()">
            <i class="fas fa-plus"></i>
        </button>
    </div>

    <mat-divider class="dialog-form-divider"></mat-divider>

    <div mat-dialog-content *ngIf="form && exerciseType && settings">
        <div class="form" fxLayout="column">
            <form [formGroup]="form">
                <div formArrayName="sets" *ngFor="let set of formControls; let i = index">
                    <div id="control-row" formGroupName="{{i}}" fxLayout="row" fxLayoutGap="10px">

                        <label id="set-number">{{i+1}}.</label>

                        <ng-container *ngIf="exerciseType.requiresBodyweight">
                            <mat-form-field>
                                <input matInput type="number" formControlName="weight" placeholder="Bodyweight">
                            </mat-form-field>
                        </ng-container>

                        <ng-container *ngIf="exerciseType.requiresWeight">
                            <mat-form-field>
                                <input matInput type="number" formControlName="weight" placeholder="Weight">
                            </mat-form-field>
                        </ng-container>

                        <ng-container *ngIf="exerciseType.requiresReps">
                            <mat-form-field>
                                <input matInput type="number" formControlName="reps" placeholder="Reps">
                            </mat-form-field>
                        </ng-container>

                        <ng-container *ngIf="exerciseType.requiresTime">
                            <mat-form-field>
                                <input matInput type="number" formControlName="time" placeholder="Time">
                            </mat-form-field>
                        </ng-container>

                        <ng-container *ngIf="settings.useRpeSystem">
                            <mat-form-field>
                                <input matInput type="number" formControlName="rpe" placeholder="RPE">
                            </mat-form-field>
                            <mat-divider [vertical]="true"></mat-divider>
                        </ng-container>

                        <button id="delete-set" mat-icon-button color="accent" (click)="removeControl(i)">
                            <i class="fas fa-trash"></i>
                        </button>

                    </div>
                </div>
            </form>
        </div>
    </div>


    <div class="mt-2 dialog-form-actions" fxLayout="row" fxLayoutAlign="space-between">
        <button mat-button color="accent" (click)="onClose()">Close</button>
        <button mat-stroked-button color="primary" (click)="onSubmit()"
            [disabled]="!form.valid">{{ data.action == 'Create' ? 'Add' : 'Save' }}</button>
    </div>

</span>